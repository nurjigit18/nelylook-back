{% extends "admin/base_site.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<div style="padding: 20px;">

    {% if show_dashboard %}

    <!-- Welcome Section -->
    <div style="background: #f8f8f8; border: 1px solid #ccc; padding: 20px; margin-bottom: 20px;">
        <h1 style="margin: 0 0 10px 0; font-size: 24px; color: #333;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ NelyLook Admin</h1>
        <p style="margin: 0; font-size: 14px; color: #666;">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ —Ç–æ–≤–∞—Ä–∞–º–∏</p>
    </div>

    <!-- Quick Stats -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">

        <div style="background: white; padding: 15px; border: 1px solid #ccc;">
            <div style="color: #666; font-size: 13px; margin-bottom: 5px;">üì¶ –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤</div>
            <div style="font-size: 28px; font-weight: bold; color: #333;">{{ stats.total_products }}</div>
            <div style="color: #666; font-size: 11px; margin-top: 5px;">{{ stats.active_products }} –∞–∫—Ç–∏–≤–Ω—ã—Ö</div>
        </div>

        <div style="background: white; padding: 15px; border: 1px solid #ccc;">
            <div style="color: #666; font-size: 13px; margin-bottom: 5px;">üé® –ê—Ä—Ç–∏–∫—É–ª—ã</div>
            <div style="font-size: 28px; font-weight: bold; color: #333;">{{ stats.total_color_variants }}</div>
            <div style="color: #666; font-size: 11px; margin-top: 5px;">–ú–æ–¥–µ–ª–∏ √ó –¶–≤–µ—Ç–∞</div>
        </div>

        <div style="background: white; padding: 15px; border: 1px solid #ccc;">
            <div style="color: #666; font-size: 13px; margin-bottom: 5px;">‚ö†Ô∏è –ù–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫</div>
            <div style="font-size: 28px; font-weight: bold; color: #c00;">{{ stats.low_stock_variants }}</div>
            <div style="color: #666; font-size: 11px; margin-top: 5px;">{{ stats.out_of_stock }} –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å</div>
        </div>

        <div style="background: white; padding: 15px; border: 1px solid #ccc;">
            <div style="color: #666; font-size: 13px; margin-bottom: 5px;">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
            <div style="font-size: 28px; font-weight: bold; color: #333;">{{ stats.featured_products }}</div>
            <div style="color: #666; font-size: 11px; margin-top: 5px;">{{ stats.new_arrivals }} –Ω–æ–≤–∏–Ω–æ–∫</div>
        </div>

    </div>

    <!-- Quick Actions -->
    <div style="background: white; padding: 20px; border: 1px solid #ccc; margin-bottom: 20px;">
        <h2 style="margin: 0 0 15px 0; font-size: 16px; color: #333;">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">

            <a href="/admin/catalog/product/easy-creator/" class="button" style="display: block; padding: 10px; text-align: center;">
                ‚ö° –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            </a>

            <a href="{% url 'admin:catalog_product_changelist' %}" class="button" style="display: block; padding: 10px; text-align: center;">
                üìã –í—Å–µ —Ç–æ–≤–∞—Ä—ã
            </a>

            <a href="{% url 'admin:catalog_collection_changelist' %}" class="button" style="display: block; padding: 10px; text-align: center;">
                üè∑Ô∏è –ö–æ–ª–ª–µ–∫—Ü–∏–∏
            </a>

            <a href="{% url 'admin:catalog_category_changelist' %}" class="button" style="display: block; padding: 10px; text-align: center;">
                üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
            </a>

        </div>
    </div>

    <!-- Recent Products & Alerts -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">

        <!-- Recent Products -->
        <div style="background: white; padding: 15px; border: 1px solid #ccc;">
            <h2 style="margin: 0 0 10px 0; font-size: 14px; color: #333;">üì¶ –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç–æ–≤–∞—Ä—ã ({{ recent_products|length }})</h2>
            {% if recent_products %}
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <tbody>
                        {% for product in recent_products %}
                            <tr style="border-bottom: 1px solid #f0f0f0;">
                                <td style="padding: 10px 0;">
                                    <a href="{% url 'admin:catalog_product_change' product.product_id %}" style="color: #007bff; text-decoration: none; font-weight: 500;">
                                        {{ product.product_name }}
                                    </a>
                                    <div style="font-size: 12px; color: #666;">{{ product.category.category_name|default:"–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" }}</div>
                                    {% if product.colors_sizes %}
                                    <div style="font-size: 11px; color: #999; margin-top: 3px;">
                                        {{ product.colors_sizes|safe }}
                                    </div>
                                    {% endif %}
                                </td>
                                <td style="padding: 10px 0; text-align: right;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 3px 8px; border-radius: 4px; font-size: 12px;">
                                        {{ product.base_price }} —Å
                                    </span>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p style="color: #999; text-align: center; padding: 20px;">–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤</p>
            {% endif %}
        </div>

        <!-- Low Stock Alerts -->
        <div style="background: white; padding: 15px; border: 1px solid #ccc;">
            <h2 style="margin: 0 0 10px 0; font-size: 14px; color: #333;">‚ö†Ô∏è –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã ({{ low_stock_items|length }})</h2>
            {% if low_stock_items %}
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <tbody>
                        {% for variant in low_stock_items %}
                            <tr style="border-bottom: 1px solid #f0f0f0;">
                                <td style="padding: 10px 0;">
                                    <a href="{% url 'admin:catalog_productvariant_change' variant.variant_id %}" style="color: #dc3545; text-decoration: none; font-weight: 500;">
                                        {{ variant.product.product_name }}
                                    </a>
                                    <div style="font-size: 12px; color: #666;">
                                        {{ variant.color.color_name|default:"–ë–µ–∑ —Ü–≤–µ—Ç–∞" }} / {{ variant.size.size_name|default:"–ë–µ–∑ —Ä–∞–∑–º–µ—Ä–∞" }}
                                    </div>
                                    {% if variant.sku %}
                                    <div style="font-size: 11px; color: #999; margin-top: 3px;">
                                        <strong>–ë–∞—Ä–∫–æ–¥:</strong> {{ variant.sku }}
                                    </div>
                                    {% endif %}
                                </td>
                                <td style="padding: 10px 0; text-align: right;">
                                    <span style="background: #fff3cd; color: #856404; padding: 3px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                                        {{ variant.stock_quantity }} —à—Ç
                                    </span>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p style="color: #28a745; text-align: center; padding: 20px;">‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –Ω–∞–ª–∏—á–∏–∏</p>
            {% endif %}
        </div>

    </div>

    <!-- Help Section -->
    <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; margin-top: 30px; border-radius: 4px;">
        <h3 style="margin: 0 0 10px 0; color: #856404; font-size: 16px;">üí° –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ</h3>
        <ol style="margin: 10px 0 0 0; padding-left: 20px; color: #856404;">
            <li style="margin-bottom: 8px;"><strong>–õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:</strong> –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚ö° –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" ‚Üí –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –≤ –æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ (–æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –≤–∞—Ä–∏–∞—Ü–∏–∏, —Ñ–æ—Ç–æ) ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ</li>
            <li style="margin-bottom: 8px;"><strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏:</strong> –ö–æ–ª–ª–µ–∫—Ü–∏–∏ ‚Üí –í—ã–±—Ä–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é ‚Üí –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã —á–µ—Ä–µ–∑ "–¢–æ–≤–∞—Ä—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏"</li>
            <li style="margin-bottom: 8px;"><strong>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ:</strong> –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ ‚Üí –í —Ä–∞–∑–¥–µ–ª–µ "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–∞" –≤—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª ‚Üí –û—Ç–º–µ—Ç—å—Ç–µ "–û—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ"</li>
            <li><strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º:</strong> –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–æ–≤ –∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <a href="/cms/" style="color: #856404; font-weight: bold;">Wagtail CMS</a></li>
        </ol>
    </div>

    {% endif %}

</div>
{% endblock %}
